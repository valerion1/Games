
#pragma once

#include "Figure.h"

class GameField	// ????? ???????? ????
{
public:
    bool **gameFieldArray;	// ????????? ?? ?????? ?????????? / ??????? ?????? - ????
    const int width, height; // ??????? ????

    enum Mode{classic,endless};

    GameField(int, int);

    ~GameField();

    int GetScore();

    bool** NextFigure();

    void CreateFigure();	// ???????? ??????

    void SpeedUpFigure();	// ????????? ??????? ??????

    void MoveLeftFigure();	// ???????? ?????

    void MoveRightFigure();	// ???????? ??????

    void MoveRotateFigure();	// ??????? ??????

    void MoveDownFigure();	// ???????? ?????? ????

    bool CheckCollisionDown(); // ???????? ???????????? ?????

    bool CheckGameOver();	// ???????? ???????????? ?? "???????"

    bool CheckLine();	// ???????? ?????

    void Restart();

    void SetMode(int in);

private:
    Figure *figure;    // ??????
    float currentX, currentY;	// ????????? ?????????? ??????
    float speed;	// ???????? ??????? ??????
    int score;
    int next_figure;

    void AddFigure();	// ?????????? ?????? ?? ??????? ????

    void ClearPrevious();	// ???????? ??????????? ????

    bool CheckCollisionLeft();	// ???????? ???????????? ?????

    bool CheckCollisionRight();	// ???????? ???????????? ??????

    void DeleteHorizontalLine(int index_line);

    void DeleteVerticalLine(int index_line);

    void ClearAll();

    Mode mode;
};
